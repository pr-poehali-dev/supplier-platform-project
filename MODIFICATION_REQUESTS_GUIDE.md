# –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö –±—Ä–æ–Ω–µ–π

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–∑–µ (Base Info)

–í –∫–∞–ª–µ–Ω–¥–∞—Ä–µ –ø–æ—è–≤–∏–ª—Å—è –Ω–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª **"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–∑–µ"**:
- –ù–∞–∑–≤–∞–Ω–∏–µ –±–∞–∑—ã
- –¢–µ–ª–µ—Ñ–æ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –ò–º—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?**
–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤. –ö–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç —Ö–æ—á–µ—Ç –≤–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–ø–ª–∞—á–µ–Ω–Ω—É—é –±—Ä–æ–Ω—å, –±–æ—Ç –ø–æ–∫–∞–∂–µ—Ç –µ–º—É —ç—Ç–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã.

### 2. Intent: modify_booking

–ö–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç –ø–∏—à–µ—Ç:
- "—É–±—Ä–∞—Ç—å –¥–æ–ø. —É—Å–ª—É–≥—É"
- "–ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –¥–∞—Ç—ã"
- "–≤–µ—Ä–Ω—É—Ç—å –¥–µ–Ω—å–≥–∏"
- "–∏–∑–º–µ–Ω–∏—Ç—å –±—Ä–æ–Ω—å"

–ë–æ—Ç:
1. –†–∞—Å–ø–æ–∑–Ω–∞—ë—Ç intent `modify_booking`
2. –°–æ–∑–¥–∞—ë—Ç –∑–∞—è–≤–∫—É –≤ —Ç–∞–±–ª–∏—Ü–µ `modification_requests`
3. –£–≤–µ–¥–æ–º–ª—è–µ—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞ –≤ Telegram
4. –û—Ç–≤–µ—á–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç—É:

```
–ü–æ–Ω—è–ª –≤–∞—Å, –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–ø–ª–∞—á–µ–Ω–Ω—É—é –±—Ä–æ–Ω—å.

–¢–∞–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –±–∞–∑—ã.
–Ø –ø–µ—Ä–µ–¥–∞–ª –≤–∞—à—É –ø—Ä–æ—Å—å–±—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.

–î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –º–æ–∂–µ—Ç–µ —Å–≤—è–∑–∞—Ç—å—Å—è –Ω–∞–ø—Ä—è–º—É—é:
üìû +7 900 123-45-67
üèï –¢—É—Ä–±–∞–∑–∞ ¬´–õ–µ—Å–Ω–∞—è —Å–∫–∞–∑–∫–∞¬ª
```

### 3. –ó–∞—è–≤–∫–∏ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ

–í –∫–∞–ª–µ–Ω–¥–∞—Ä–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –ø–æ—è–≤–∏–ª—Å—è —Ä–∞–∑–¥–µ–ª **"–ó–∞—è–≤–∫–∏ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –±—Ä–æ–Ω–µ–π"**.

–ö–∞–∂–¥–∞—è –∑–∞—è–≤–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç:
- –ù–æ–º–µ—Ä –∑–∞—è–≤–∫–∏
- –ò–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞
- –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞
- –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- –ö–Ω–æ–ø–∫–∞ "–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ"

### 4. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### –¢–∞–±–ª–∏—Ü–∞ modification_requests:
- `id` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –∑–∞—è–≤–∫–∏
- `booking_id` ‚Äî —Å–≤—è–∑—å —Å –±—Ä–æ–Ω—å—é (–º–æ–∂–µ—Ç –±—ã—Ç—å NULL)
- `client_name` ‚Äî –∏–º—è –∫–ª–∏–µ–Ω—Ç–∞
- `client_phone` ‚Äî —Ç–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞
- `telegram_chat_id` ‚Äî ID —á–∞—Ç–∞ –¥–ª—è —Å–≤—è–∑–∏
- `message_from_client` ‚Äî –ø–æ–ª–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
- `requested_changes` ‚Äî JSON —Å –¥–µ—Ç–∞–ª—è–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- `status` ‚Äî —Å—Ç–∞—Ç—É—Å (new / resolved)
- `created_at` ‚Äî –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- `resolved_at` ‚Äî –¥–∞—Ç–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
- `resolved_by` ‚Äî –∫—Ç–æ –∑–∞–∫—Ä—ã–ª –∑–∞—è–≤–∫—É

## –í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

### ‚ùå –ë–æ—Ç –ù–ï –¥–µ–ª–∞–µ—Ç:
- –ù–µ –æ–±–µ—â–∞–µ—Ç –≤–æ–∑–≤—Ä–∞—Ç –¥–µ–Ω–µ–≥
- –ù–µ –º–µ–Ω—è–µ—Ç –±—Ä–æ–Ω—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ
- –ù–µ –≥–æ–≤–æ—Ä–∏—Ç "–º—ã –Ω–µ –º–æ–∂–µ–º"
- –ù–µ —Ç–µ—Ä—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞

### ‚úÖ –ë–æ—Ç –¥–µ–ª–∞–µ—Ç:
- –°–æ–∑–¥–∞—ë—Ç –∑–∞—è–≤–∫—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç–∞–∫—Ç—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞
- –£–≤–µ–¥–æ–º–ª—è–µ—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞

## API Endpoints

### GET /modification_requests
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ

**Response:**
```json
{
  "requests": [
    {
      "id": 1,
      "booking_id": 123,
      "client_name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
      "client_phone": "+79001234567",
      "message_from_client": "–•–æ—á—É —É–±—Ä–∞—Ç—å –º–∞–Ω–≥–∞–ª, —É–∂–µ –æ–ø–ª–∞—Ç–∏–ª",
      "requested_changes": {"description": "—É–±—Ä–∞—Ç—å –¥–æ–ø. —É—Å–ª—É–≥—É"},
      "status": "new",
      "created_at": "2026-01-20T14:30:00"
    }
  ]
}
```

### PUT /resolve_modification_request
–ó–∞–∫—Ä—ã—Ç—å –∑–∞—è–≤–∫—É (–æ—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—É—é)

**Request:**
```json
{
  "request_id": 1
}
```

### GET /bot_settings
–ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–∞–∑–µ

**Response:**
```json
{
  "base_name": "–¢—É—Ä–±–∞–∑–∞ ¬´–õ–µ—Å–Ω–∞—è —Å–∫–∞–∑–∫–∞¬ª",
  "admin_phone": "+79001234567",
  "admin_name": "–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–Ω–∞",
  "work_hours": "–ï–∂–µ–¥–Ω–µ–≤–Ω–æ —Å 9:00 –¥–æ 21:00",
  "extra_notes": "–ó–∞–µ–∑–¥ –ø–æ—Å–ª–µ 14:00"
}
```

### PUT /bot_settings
–û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–∞–∑–µ

**Request:**
```json
{
  "base_name": "–¢—É—Ä–±–∞–∑–∞ ¬´–õ–µ—Å–Ω–∞—è —Å–∫–∞–∑–∫–∞¬ª",
  "admin_phone": "+79001234567",
  "admin_name": "–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–Ω–∞",
  "work_hours": "–ï–∂–µ–¥–Ω–µ–≤–Ω–æ —Å 9:00 –¥–æ 21:00",
  "extra_notes": "–ó–∞–µ–∑–¥ –ø–æ—Å–ª–µ 14:00"
}
```

## –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞

**–ö–ª–∏–µ–Ω—Ç:** –Ø —É–∂–µ –æ–ø–ª–∞—Ç–∏–ª, –Ω–æ —Ö–æ—á—É —É–±—Ä–∞—Ç—å –º–∞–Ω–≥–∞–ª

**AI —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç:** `{"intent": "modify_booking", "requested_changes": "—É–±—Ä–∞—Ç—å –º–∞–Ω–≥–∞–ª"}`

**–°–∏—Å—Ç–µ–º–∞:**
1. –°–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å—å –≤ modification_requests
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–ª–∞–¥–µ–ª—å—Ü—É:
   ```
   üîÑ –ó–∞–ø—Ä–æ—Å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –±—Ä–æ–Ω–∏ #1
   
   üë§ –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤
   üìû +79001234567
   
   üí¨ –ó–∞–ø—Ä–æ—Å –∫–ª–∏–µ–Ω—Ç–∞:
   –Ø —É–∂–µ –æ–ø–ª–∞—Ç–∏–ª, –Ω–æ —Ö–æ—á—É —É–±—Ä–∞—Ç—å –º–∞–Ω–≥–∞–ª
   
   –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞—è–≤–∫—É –≤ —Å–∏—Å—Ç–µ–º–µ.
   ```
3. –û—Ç–≤–µ—á–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç—É —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

**–í–ª–∞–¥–µ–ª–µ—Ü:** –í–∏–¥–∏—Ç –∑–∞—è–≤–∫—É –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ, –∑–≤–æ–Ω–∏—Ç –∫–ª–∏–µ–Ω—Ç—É, —Ä–µ—à–∞–µ—Ç –≤–æ–ø—Ä–æ—Å, –Ω–∞–∂–∏–º–∞–µ—Ç "–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ"
